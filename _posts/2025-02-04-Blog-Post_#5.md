---
layout: post
title: Fifth Blog Post
subtitle: "Inspir Altair"
gh-repo: daattali/beautiful-jekyll
gh-badge: [star, fork, follow]
tags: [Blog]
comments: true
mathjax: true
author: Aarav Amin
---
{: .box-success}
This is a blog post to show my thoughts behind the Inspir Altair data visualization assignment.

# Ispir Altair

I was scrolling through the r/dataisbeautiful subreddit and I found this interesting graph showing the presence of farmland in the United States. I would put a picture of it here, but unfortunately it has since been deleted by the person who made it. But basically, it showed points on the graph where there was a large share of farmland. I chose to try and recreate it because out of all the graphs it was the one that caught my attention. Unfortunetely, there weren't any Vega Datasets that show latitude and longitude data, outside of the Airports dataset, and I decided not to use that, because I used it as a source to learn about map visualization.

## The Dataset

For this project, I created a custom dataset with the names, latitudes, and longitudes of 15 major US cities. Here’s what the dataset looks like:

```
import pandas as pd

custom_data = pd.DataFrame({
    'name': [
        'New York', 'Los Angeles', 'Chicago', 'Houston', 'Phoenix',
        'San Francisco', 'Seattle', 'Boston', 'Dallas', 'Miami',
        'Denver', 'Atlanta', 'Philadelphia', 'Washington, D.C.', 'Austin'
    ],
    'latitude': [
        40.7128, 34.0522, 41.8781, 29.7604, 33.4484,
        37.7749, 47.6062, 42.3601, 32.7767, 25.7617,
        39.7392, 33.7490, 39.9526, 38.9072, 30.2672
    ],
    'longitude': [
        -74.0060, -118.2437, -87.6298, -95.3698, -112.0740,
        -122.4194, -122.3321, -71.0589, -96.7970, -80.1918,
        -104.9903, -84.3880, -75.1652, -77.0369, -97.7431
    ]
})
```

This dataset includes cities like New York, Los Angeles, Chicago, and more. Each city has a name, latitude, and longitude.

## Building the Map

To create the map, I used Altair’s geographic capabilities. Here’s the step-by-step process:

### Step 1: Load the US States Map

First, I loaded the US states dataset from Vega’s us_10m collection. This dataset provides the geographic boundaries for all 50 states.

```
import altair as alt
from vega_datasets import data

us_states = alt.topo_feature(data.us_10m.url, 'states')
```

### Step 2: Create the Base Map

Next, I created the base map using mark_geoshape(). This function draws the outlines of the US states and fills them with a light gray color.

```
# Create the base map
base = alt.Chart(us_states).mark_geoshape(
    fill="lightgray",
    stroke="white"
).project(
    "albersUsa"
).properties(
    width=800,
    height=500
)
```

### Step 3: Add the Custom Data Points

With the base map ready, I added the custom data points using mark_circle(). Each point represents a city, and I encoded the latitude and longitude to position them correctly on the map.

```
# Create the points layer
points = alt.Chart(custom_data).mark_circle(
    color='red', 
    size=100   
).encode(
    longitude='longitude:Q', 
    latitude='latitude:Q',  
    tooltip='name:N'   
).project(
    "albersUsa" 
).properties(
    width=800,
    height=500
)
```

### Step 4: Combine the Base Map and Points

Finally, I combined the base map and the points layer using the + operator. This overlays the points on top of the map.

```
# Combine the base map and points
base + points
```


## Here’s what the final map looks like:

<div id="vis"></div>
<script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
<script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
<script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
<script>
  const spec = "assets/charts/chart.json";
  vegaEmbed('#vis', spec);
</script>

## Sources

I used ChatGPT to find the longitude and latitude data point more easily.

I used https://altair-viz.github.io/altair-tutorial/notebooks/09-Geographic-plots.html for info about how to chart maps

